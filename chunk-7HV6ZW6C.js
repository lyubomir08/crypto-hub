import{A as n,B as _,E as M,F as S,Fa as D,G as u,Ga as F,Ha as R,O as d,P as r,Q as E,X as A,k as b,ka as P,m as y,n as v,oa as O,p as l,pa as T,q as x,qa as w,r as c,s as h,ta as N,ua as q,v as a,wa as U,ya as I,z as o,za as z}from"./chunk-5HTJS4VF.js";function L(t,i){if(t&1&&(o(0,"div",6)(1,"p"),r(2),n()()),t&2){let e=u();l(2),E(e.errorMessage)}}function $(t,i){t&1&&(o(0,"div",18),r(1," Crypto name is required! "),n())}function j(t,i){t&1&&(o(0,"div",18),r(1," Crypto name must be at least 3 characters! "),n())}function G(t,i){if(t&1&&(o(0,"div"),c(1,$,2,0,"div",18)(2,j,2,0,"div",18),n()),t&2){u();let e=d(10);l(),a(!(e==null||e.errors==null)&&e.errors.required?1:-1),l(),a(!(e==null||e.errors==null)&&e.errors.minlength?2:-1)}}function B(t,i){t&1&&(o(0,"div",18),r(1," Crypto symbol is required! "),n())}function H(t,i){t&1&&(o(0,"div",18),r(1," Crypto symbol must be at least 2 characters! "),n())}function J(t,i){if(t&1&&(o(0,"div"),c(1,B,2,0,"div",18)(2,H,2,0,"div",18),n()),t&2){u();let e=d(16);l(),a(!(e==null||e.errors==null)&&e.errors.required?1:-1),l(),a(!(e==null||e.errors==null)&&e.errors.minlength?2:-1)}}function K(t,i){t&1&&(o(0,"div",18),r(1," Crypto description is required! "),n())}function Q(t,i){t&1&&(o(0,"div",18),r(1," Crypto description must be at least 10 characters! "),n())}function W(t,i){if(t&1&&c(0,K,2,0,"div",18)(1,Q,2,0,"div",18),t&2){u();let e=d(22);a(!(e==null||e.errors==null)&&e.errors.required?0:-1),l(),a(!(e==null||e.errors==null)&&e.errors.minlength?1:-1)}}function X(t,i){t&1&&(o(0,"div",18),r(1," Crypto URL is required! "),n())}function Y(t,i){if(t&1&&c(0,X,2,0,"div",18),t&2){u();let e=d(28);a(!(e==null||e.errors==null)&&e.errors.required?0:-1)}}var V=class t{constructor(i,e){this.apiService=i;this.router=e}errorMessage=null;create(i){if(i.invalid){console.error("Invalid create form");return}let e=i.value.name,m=i.value.symbol.toLowerCase(),g=i.value.description,f=i.value.imageUrl,p=O[m];if(!p){this.errorMessage=`Symbol ${m} is not supported.`,setTimeout(()=>this.errorMessage=null,3e3);return}this.apiService.getLivePrices([p]).subscribe({next:s=>{let C=s[p]?.usd;if(!C){this.errorMessage=`Failed to fetch the price for ${m}.`,setTimeout(()=>this.errorMessage=null,3e3);return}this.apiService.addCrypto(e,m,C,g,f).subscribe({next:()=>{this.router.navigate(["/cryptos"])},error:k=>{this.errorMessage=k?.message,setTimeout(()=>this.errorMessage=null,3e3)}})},error:s=>{this.errorMessage=`Error fetching price: ${s?.message}`,setTimeout(()=>this.errorMessage=null,3e3)}})}static \u0275fac=function(e){return new(e||t)(x(T),x(P))};static \u0275cmp=b({type:t,selectors:[["app-add-crypto"]],standalone:!0,features:[A],decls:32,vars:6,consts:[["form","ngForm"],["inputName","ngModel"],["inputSymbol","ngModel"],["inputDescription","ngModel"],["inputImageUrl","ngModel"],[1,"create-crypto-container"],[1,"fixed","top-16","right-4","bg-red-500","text-white","p-4","rounded","shadow-lg","z-50"],[3,"ngSubmit"],[1,"form-group"],["for","name"],["type","text","id","name","name","name","ngModel","","placeholder","Enter crypto name","required","","minlength","3"],["for","symbol"],["type","text","id","symbol","name","symbol","ngModel","","placeholder","Enter crypto symbol","required","","minlength","2"],["for","description"],["id","description","name","description","ngModel","","placeholder","Enter a description","rows","4","required","","minlength","10"],["for","imageUrl"],["type","text","id","imageUrl","name","imageUrl","ngModel","","placeholder","Enter an image URL","required",""],[1,"btn",3,"disabled"],[1,"error"]],template:function(e,m){if(e&1){let g=M();o(0,"div",5)(1,"h1"),r(2,"Add Cryptocurrency"),n(),c(3,L,3,1,"div",6),o(4,"form",7,0),S("ngSubmit",function(){y(g);let p=d(5);return v(m.create(p))}),o(6,"div",8)(7,"label",9),r(8,"Crypto Name"),n(),_(9,"input",10,1),c(11,G,3,2,"div"),n(),o(12,"div",8)(13,"label",11),r(14,"Symbol"),n(),_(15,"input",12,2),c(17,J,3,2,"div"),n(),o(18,"div",8)(19,"label",13),r(20,"Description"),n(),_(21,"textarea",14,3),c(23,W,2,2),n(),o(24,"div",8)(25,"label",15),r(26,"Image URL"),n(),_(27,"input",16,4),c(29,Y,1,1),n(),o(30,"button",17),r(31,"Add Crypto"),n()()()}if(e&2){let g=d(5),f=d(10),p=d(16),s=d(22),C=d(28);l(3),a(m.errorMessage?3:-1),l(8),a(f!=null&&f.touched?11:-1),l(6),a(p!=null&&p.touched?17:-1),l(6),a(s!=null&&s.touched?23:-1),l(6),a(C!=null&&C.touched?29:-1),l(),h("disabled",g.invalid)}},dependencies:[R,z,w,N,q,D,F,I,U],styles:['.create-crypto-container[_ngcontent-%COMP%]{max-width:460px;margin:25px auto;padding:10px;background-color:#f4f4f4;border-radius:8px;box-shadow:0 4px 8px #0000001a;font-family:Arial,sans-serif}.create-crypto-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-align:center;margin-bottom:13px;color:#333;font-size:1.8rem;font-weight:700;text-shadow:1px 1px 3px rgba(0,0,0,.2)}.form-group[_ngcontent-%COMP%]{margin-bottom:10px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:700;margin-bottom:4px;color:#555;font-size:.88rem}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:7px;font-size:15px;border:1px solid #ccc;border-radius:4px;box-sizing:border-box}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:none}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{border-color:#007bff;outline:none}.btn[_ngcontent-%COMP%]{display:block;width:100%;padding:9px;font-size:16px;color:#fff;background-color:#007bff;border:none;border-radius:4px;cursor:pointer;text-align:center}.btn[_ngcontent-%COMP%]:hover{background-color:#0056b3}.error[_ngcontent-%COMP%]{color:#d93025;font-size:.8rem;margin-top:1.5px;padding:4px 8px;background-color:#ffeaea;border-left:2px solid #d93025;border-radius:3px;display:flex;align-items:center;gap:5px}.error[_ngcontent-%COMP%]:before{content:"\\26a0\\fe0f";font-size:.8rem}']})};export{V as AddCryptoComponent};
