<div class="edit-crypto-container">
    @if (isLoading) {
    <app-loader />
    } @else {
    <h1>Edit Cryptocurrency</h1>
    <form #editForm="ngForm" (ngSubmit)="editCrypto()">
        <div class="form-group">
            <label for="name">Crypto Name</label>
            <input type="text" id="name" name="name" [(ngModel)]="crypto.name" #inputName="ngModel" placeholder="Enter crypto name"
                required minlength="3" />
            @if (inputName?.touched) {
            <div>
                @if (inputName?.errors?.['required']) {
                <div class="error">Crypto name is required!</div>
                }
                @if (inputName?.errors?.['minlength']) {
                <div class="error">Crypto name must be at least 3 characters!</div>
                }
            </div>
            }
        </div>

        <div class="form-group">
            <label for="symbol">Symbol</label>
            <input type="text" id="symbol" name="symbol" [(ngModel)]="crypto.symbol" #inputSymbol="ngModel"
                placeholder="Enter crypto symbol" required minlength="2" />
            @if (inputSymbol?.touched) {
            <div>
                @if (inputSymbol?.errors?.['required']) {
                <div class="error">Crypto symbol is required!</div>
                }
                @if (inputSymbol?.errors?.['minlength']) {
                <div class="error">Crypto symbol must be at least 2 characters!</div>
                }
            </div>
            }
        </div>

        <div class="form-group">
            <label for="currentPrice">Current Price</label>
            <input type="number" id="currentPrice" name="currentPrice" [(ngModel)]="crypto.currentPrice" #inputPrice="ngModel"
                placeholder="Enter current price" required min="0.01" />
            @if (inputPrice?.touched) {
            <div>
                @if (inputPrice?.errors?.['required']) {
                <div class="error">Crypto price is required!</div>
                }
                @if (inputPrice?.errors?.['min']) {
                <div class="error">Crypto price must cost at least 0.01</div>
                }
            </div>
            }
        </div>

        <div class="form-group">
            <label for="description">Description</label>
            <textarea id="description" name="description" [(ngModel)]="crypto.description" #inputDescription="ngModel"
                placeholder="Enter a description" rows="4" required minlength="10"></textarea>
            @if (inputDescription?.touched) {
            <div>
                @if (inputDescription?.errors?.['required']) {
                <div class="error">Crypto description is required!</div>
                }
                @if (inputDescription?.errors?.['minlength']) {
                <div class="error">Description must be at least 10 characters!</div>
                }
            </div>
            }
        </div>

        <div class="form-group">
            <label for="imageUrl">Image URL</label>
            <input type="text" id="imageUrl" name="imageUrl" [(ngModel)]="crypto.imageUrl" #inputImageUrl="ngModel"
                placeholder="Enter an image URL" required />
            @if (inputImageUrl?.touched) {
            <div>
                @if (inputImageUrl?.errors?.['required']) {
                <div class="error">Crypto URL is required!</div>
                }
            </div>
            }
        </div>

        <div class="button-group">
            <button class="btn" [disabled]="editForm.invalid">Save Changes</button>
            <button type="button" class="btn cancel" (click)="onCancel($event)">Cancel</button>
        </div>
    </form>
    }
</div>